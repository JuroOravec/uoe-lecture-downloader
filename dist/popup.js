!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=9)}([,,function(e,n){e.exports='\x3c!--\n    arguments to be replaced:\n    - nameEscaped // == video.name.toLowercase().replace(\' \', \'-\')\n    - res // in this case, size is the smaller of the 2 dimensions (e.g 360p)\n    - s3Url // url of this version of video\n--\x3e\n\n<label class="option" tabindex="0">\n    <input type="checkbox" name="${nameEscaped}-${res}" value="res-${res}-size-${size}-url-${s3Url}">\n    <span>${res}</span>\n</label>'},function(e,n){e.exports='\x3c!--\n    arguments to be replaced:\n    - videoUrl\n    - name\n    - thumbnailUrl\n--\x3e\n<div class="lecture">\n    <a href="${videoUrl}" title="${name}" target="_blank" tabindex="0">\n        <img class="lecture-thumbnail" src="${thumbnailUrl}" alt="${name}">\n    </a>\n    <div class="lecture-desc">\n        <h3 class="lecture-title">${name}</h3>\n        <div class="download-options">\n        </div>\n        <div class="download">\n            <button class="download-button" disabled tabindex="0">Download!</button>\n            <div class="download-size"></div>\n        </div>\n    </div>\n</div>\n<hr>'},function(e,n){e.exports='\x3c!--\n    Arguments to be replaced:\n    - courseId\n    - courseTitle\n--\x3e\n<div class="course-container" id="${courseId}">\n    <div class="course-title-container">\n        <h3 class="course-title">${courseName}</h3>\n    </div>\n    <div class="lectures-container">\n    </div>\n</div>'},function(e,n){e.exports='\x3c!--\n    arguments to be replaced:\n    courseTitle\n\n\n--\x3e\n\n<div class="popup">\n\n</div>'},,,function(e,n,t){},function(e,n,t){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=t(8);(r=c)&&r.__esModule;function i(e,n){if("keypress"!==e.type||13===e.keyCode){var t=n.closest(".lecture-desc"),r=t.querySelector(".download-size"),o=t.querySelector(".download-button");t&&r&&o&&setTimeout(function(){var e=t.querySelectorAll('input[type="checkbox"]:checked'),n=Array.from(e).reduce(function(e,n){var t=Number(n.value.match(/size-(\d*?)-/)[1]);return!0===Number.isNaN(t)&&(t=0),e+t},0);r.innerHTML=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Number.isNaN(Number(e)))return NaN;if(0===e)return"";var r=n?1e3:1024;if(Math.abs(e)<r)return e+" B";var o=n?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],c=-1;do{e/=r,++c}while(Math.abs(e)>=r&&c<o.length-1);return e.toFixed(t)+" "+o[c]}(n,!0),0===e.length?o.disabled=!0:o.disabled=!1},0)}}function a(e,n){if("object"!==(void 0===n?"undefined":o(n)))throw TypeError("Expected argument to be object, got "+(void 0===n?"undefined":o(n)));var t=e.match(/\${.*?}/g),r=e;return(t=t.filter(function(e,n,t){return t.indexOf(e)===n})).forEach(function(e){var t=e.replace(/\${(.*?)}/,"$1");void 0===n[t]&&(n[t]="");var o=new RegExp("\\${"+t+"}","g");r=r.replace(o,n[t])}),r}document.body.insertAdjacentHTML("beforeend",t(5)),chrome.storage.local.get("videos",function(e){e.videos.forEach(function(e){""===e.courseId&&(e.courseId="Other");var n=document.querySelector("#"+String(e.courseId)+" .lectures-container");if(!n){var r=t(4);document.querySelector(".popup").insertAdjacentHTML("beforeend",a(r,e)),n=document.querySelector("#"+String(e.courseId)+" .lectures-container")}var o=t(3);n.insertAdjacentHTML("beforeend",a(o,e));var c=n.querySelectorAll(".lecture"),i=c[c.length-1],u=i.querySelector("a");u.innerHTML=u.innerHTML.trim();var s=i.querySelector(".download-options");if(s){var l=t(2),d=e.name.toLowerCase().replace(/ /g,"-");e.files.forEach(function(e){e.res=Math.min(e.width,e.height).toString()+"p",e.nameEscaped=d,s.insertAdjacentHTML("beforeend",a(l,e))})}}),document.querySelectorAll(".option, .option input").forEach(function(e){e.addEventListener("click",function(n){i(n,e)}),e.addEventListener("keypress",function(n){i(n,e)})}),document.querySelectorAll(".download-button").forEach(function(e){e.addEventListener("click",function(){!function(e){var n=e.closest(".lecture-desc");if(!n)return;var t=e.closest(".course-container"),r=t?t.querySelector(".course-title").innerHTML:"",o=n.querySelector(".lecture-title"),c=o?o.innerHTML:"",i=n.querySelectorAll('input[type="checkbox"]:checked'),a={status:"success",from:"popup",to:"background",payload:{downloadQueryList:Array.from(i).map(function(e){e.value.match(/size-(\d*?)-/)[1];var n=e.value.match(/res-(.*?)-/)[1],t=e.value.match(/url-(.*)$/)[1],o=t.match(/(\.[^.]*?)(?=\?)/)[1],i={url:t,filename:r+"/"+c+"-"+n+o,saveAs:!1};return i})}},u=JSON.stringify(a);chrome.runtime.sendMessage(u)}(e)})}),document.querySelectorAll(".option").forEach(function(e){e.addEventListener("keypress",function(e){if(13==e.keyCode){var n=e.target.querySelector('input[type="checkbox"]'),t=n.checked;n.checked=!t}})})})}]);